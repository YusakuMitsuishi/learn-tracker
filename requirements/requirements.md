# 学習継続支援 Web アプリ 要件定義書

## 1. 概要

学習や運動などの継続的な活動をサポートする Web アプリケーション。
ディスプレイに常時このアプリを全画面表示を行い、本日の TODO リスト、実績や、直近 30 日の実績（継続履歴）、
カレンダーの表示を順々に表示する使われ方を想定する。

- **対象**: Web ブラウザで動作する Web アプリケーション（PWA 対応）
- **デバイス**: PC、スマートフォン、タブレット対応（レスポンシブデザイン）
- **データ同期**: 複数デバイス間でリアルタイム同期
- **オフライン対応**: PWA によるオフライン使用可能
- **利用形態**: 個人利用を基本とし、将来的に家族・チーム共有機能も検討

## 2. 主要機能

### 2.1 ディスプレイモード
- **自動画面切り替え**: 10秒間隔で画面を自動切り替え（設定でカスタマイズ可能）
- **表示内容**:
  - 本日の TODO リスト
  - 本日の実績・進捗
  - 直近 30 日の継続履歴
  - カレンダー表示
  - 統計・分析画面（週次・月次レポート）
  - 応援メッセージ・Tips
- **操作性**:
  - 自動ループと手動操作の両対応
  - 全画面表示モード
  - 夜間モード（ダークテーマ）切り替え
  - クイック記録ボタン（ディスプレイモードから即座に実績記録）

### 2.2 達成・継続報酬システム
- **達成時演出**:
  - アニメーション（紙吹雪、花火、キラキラエフェクト等）
  - 効果音・BGM
  - 褒め言葉のメッセージ表示
  - キャラクター表示（オプション）
  - 音声フィードバック（オプション）
- **継続報酬**:
  - 継続日数（ストリーク）の表示と祝福演出
  - マイルストーン達成時の特別演出（7日、30日、100日、365日等）
  - バッジ・トロフィーの獲得システム
  - 最長継続記録の更新時の特別演出
- **カスタマイズ**: 演出の ON/OFF、強度調整が可能

### 2.3 TODO 管理機能
- **TODO 登録**:
  - タイトル・説明の入力
  - 数値目標と記録形態の選択（体重、距離、時間、単語数、回数など）
  - 期限設定（デッドライン）
  - 優先度設定（高・中・低）
  - 1日に複数の TODO 設定可能
- **進捗記録**:
  - 数値入力（テキスト入力・音声入力対応）
  - クイック記録機能（よく使う値のプリセット）
  - 記録時のタイムスタンプ自動保存
  - 棒グラフ・折れ線グラフでの可視化

### 2.4 統計・分析機能
- **レポート自動生成**:
  - 日次サマリー
  - 週次レポート（達成率、継続日数、総学習時間等）
  - 月次レポート（月間目標達成度、推移グラフ）
- **データ可視化**:
  - 達成率の推移グラフ
  - 継続日数カレンダー（ヒートマップ）
  - カテゴリ別時間配分（円グラフ）
  - 目標達成トレンド分析
- **ストリーク管理**:
  - 現在の継続日数
  - 最長継続記録
  - 継続率の表示

### 2.5 通知・リマインダー機能
- **リマインダー**:
  - 設定時間に TODO のリマインダー通知
  - カスタマイズ可能な通知時間・頻度
- **継続促進通知**:
  - 一定期間記録がない場合の励まし通知
  - 連続記録が途切れそうな時のアラート
- **PWA プッシュ通知**: デバイスへのネイティブ通知対応

### 2.6 カスタマイズ機能
- **テーマ設定**:
  - カラーテーマの変更（複数プリセット + カスタムカラー）
  - ライト/ダークモード
  - フォントサイズ調整
- **表示設定**:
  - ディスプレイモードの画面順序カスタマイズ
  - 画面切り替え間隔の調整
  - 表示項目の ON/OFF
- **演出設定**:
  - 演出の種類選択
  - 効果音・BGM の ON/OFF
  - アニメーション速度調整

### 2.7 ソーシャル機能（オプション）
- **シェア機能**:
  - 実績の SNS 投稿（Twitter、Instagram 等）
  - 達成バッジの共有
  - スクリーンショット機能
- **コミュニティ機能**（将来実装）:
  - 友達との継続日数比較
  - リーダーボード
  - 励まし合い機能

### 2.8 データ管理機能
- **エクスポート**:
  - CSV 形式でのデータダウンロード
  - JSON 形式でのバックアップ
  - PDF レポート出力
- **インポート**:
  - バックアップデータの復元
  - 他サービスからのデータ移行（将来対応）
- **データ保持期間**: 無期限（ユーザーが削除するまで保持）

## 3. 技術スタック

### 3.1 フロントエンド
- **フレームワーク**: React.js (Next.js)
- **状態管理**: Zustand / React Context API
- **UI ライブラリ**: Tailwind CSS + shadcn/ui
- **PWA**: next-pwa（Service Worker）
- **アニメーション**: Framer Motion
- **グラフ描画**: Recharts
- **音声入力**: Web Speech API

### 3.2 バックエンド (BaaS)
- **BaaS**: Supabase
  - **データベース**: PostgreSQL（Supabase提供）
  - **認証**: Supabase Auth
  - **リアルタイム同期**: Supabase Realtime
  - **ストレージ**: Supabase Storage（画像・ファイル用）
  - **Edge Functions**: Supabase Edge Functions（必要に応じて）
- **API**: Supabase自動生成REST API + PostgREST
- **ローカルストレージ**: IndexedDB（オフライン対応）

### 3.3 インフラ・デプロイ（完全無料構成）
- **ホスティング**: Vercel（フロントエンド・無料プラン）
- **バックエンド**: Supabase（無料プラン）
  - データベース: 500MB
  - 認証ユーザー: 50,000 MAU
  - ストレージ: 1GB
  - 帯域幅: 2GB/月
- **CI/CD**: GitHub Actions + Vercel自動デプロイ

### 3.4 開発ツール
- **バージョン管理**: Git / GitHub
- **パッケージ管理**: pnpm
- **コード品質**: ESLint、Prettier、TypeScript
- **テスト**: Vitest、React Testing Library

## 4. 非機能要件

### 4.1 パフォーマンス
- **初回ロード時間**: 3秒以内
- **画面切り替え**: スムーズなアニメーション（60fps）
- **API レスポンス**: 500ms 以内

### 4.2 セキュリティ
- **データ暗号化**: 通信時（TLS/SSL）および保存時
- **認証**: 多要素認証対応（オプション）
- **プライバシー**: GDPR 準拠、データ削除権の保証

### 4.3 アクセシビリティ
- **WCAG 2.1 準拠**: AA レベル以上
- **キーボード操作**: 全機能キーボードでアクセス可能
- **スクリーンリーダー対応**: ARIA ラベルの適切な使用

### 4.4 ブラウザ対応
- **対応ブラウザ**:
  - Chrome（最新版 + 過去2バージョン）
  - Firefox（最新版 + 過去2バージョン）
  - Safari（最新版 + 過去2バージョン）
  - Edge（最新版 + 過去2バージョン）

### 4.5 レスポンシブデザイン
- **ブレークポイント**:
  - モバイル: 320px〜767px
  - タブレット: 768px〜1023px
  - デスクトップ: 1024px以上

## 5. モチベーション維持の工夫

### 5.1 応援メッセージシステム
- **日替わりメッセージ**: 毎日異なる励ましの言葉を表示
- **状況に応じたメッセージ**:
  - 連続達成中: より強い称賛
  - 久しぶりの記録: 温かい歓迎
  - 目標達成間近: 追い込みの応援
- **Tips 表示**: 継続のコツ、学習法、モチベーション維持のアドバイス

### 5.2 ゲーミフィケーション要素
- **レベルシステム**: 総実績に応じたレベルアップ
- **実績（アチーブメント）**: 隠し実績を含む多様な実績
- **称号システム**: 達成内容に応じた称号の付与
- **ポイントシステム**: 活動に応じたポイント獲得

### 5.3 視覚的フィードバック
- **プログレスバー**: 目標達成度の視覚化
- **カラフルなグラフ**: モチベーションを高める配色
- **アニメーション**: 達成時の派手な演出
- **カレンダーヒートマップ**: GitHub スタイルの継続可視化

## 6. 今後の拡張可能性

### 6.1 短期的な追加機能（3〜6ヶ月）
- **タイマー機能**: ポモドーロタイマー統合
- **習慣トラッキング**: 日々の習慣チェックリスト
- **メモ機能**: TODO に関連するメモの記録

### 6.2 中長期的な追加機能（6ヶ月〜1年）
- **AI コーチング**: 機械学習による個別アドバイス
- **グループ機能**: チームでの目標共有・管理
- **統合機能**: Google Calendar、Notion、Trello 等との連携
- **ウェアラブル対応**: スマートウォッチからの記録

### 6.3 マネタイズ検討（将来）
- **無料プラン**: 基本機能
- **プレミアムプラン**: 高度な分析、追加テーマ、優先サポート
- **広告**: 控えめな表示（無料プランのみ）

## 7. 開発フェーズ

### Phase 1: MVP（最小限の実装）
- 基本的な TODO 登録・記録機能
- ディスプレイモード（基本画面切り替え）
- シンプルな達成演出
- 認証機能

### Phase 2: コア機能拡張
- 統計・分析機能
- カスタマイズ機能
- 通知・リマインダー
- PWA 対応

### Phase 3: UX 向上
- 高度な演出システム
- 音声入力
- データエクスポート
- アクセシビリティ対応

### Phase 4: ソーシャル・拡張機能
- シェア機能
- コミュニティ機能
- 外部サービス連携
